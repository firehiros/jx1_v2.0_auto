<UserControl x:Class="JX1Launcher.Controls.AccountCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="220" d:DesignWidth="420">

    <Border BorderThickness="2" CornerRadius="8" Margin="5" Padding="10">
        <Border.Style>
            <Style TargetType="Border">
                <Setter Property="BorderBrush" Value="#888888"/>
                <Style.Triggers>
                    <!-- Color based on status -->
                    <DataTrigger Binding="{Binding Status}" Value="Running">
                        <Setter Property="BorderBrush" Value="#00FF00"/>
                        <Setter Property="Background" Value="#002200"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Status}" Value="Paused">
                        <Setter Property="BorderBrush" Value="#FFAA00"/>
                        <Setter Property="Background" Value="#221800"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Status}" Value="Error">
                        <Setter Property="BorderBrush" Value="#FF0000"/>
                        <Setter Property="Background" Value="#220000"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Status}" Value="Idle">
                        <Setter Property="BorderBrush" Value="#555555"/>
                        <Setter Property="Background" Value="#1A1A1A"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Border.Style>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- Header -->
                <RowDefinition Height="Auto"/>  <!-- Character Info -->
                <RowDefinition Height="Auto"/>  <!-- HP/MP Bars -->
                <RowDefinition Height="Auto"/>  <!-- Status -->
                <RowDefinition Height="Auto"/>  <!-- Stats -->
                <RowDefinition Height="Auto"/>  <!-- Controls -->
            </Grid.RowDefinitions>

            <!-- Header (Account nickname + status indicator) -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding DisplayName}"
                           FontSize="16" FontWeight="Bold" Foreground="White"/>

                <Ellipse Grid.Column="1" Width="12" Height="12" VerticalAlignment="Center">
                    <Ellipse.Style>
                        <Style TargetType="Ellipse">
                            <Setter Property="Fill" Value="#888888"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Status}" Value="Running">
                                    <Setter Property="Fill" Value="#00FF00"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Paused">
                                    <Setter Property="Fill" Value="#FFAA00"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Error">
                                    <Setter Property="Fill" Value="#FF0000"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Ellipse.Style>
                </Ellipse>
            </Grid>

            <!-- Character Info -->
            <StackPanel Grid.Row="1" Margin="0,0,0,10">
                <TextBlock Text="{Binding CharacterName}" FontSize="14" Foreground="#CCCCCC"/>
                <TextBlock Text="{Binding LevelAndMap}" FontSize="12" Foreground="#888888" Margin="0,2,0,0"/>
            </StackPanel>

            <!-- HP/MP Progress Bars -->
            <Grid Grid.Row="2" Margin="0,0,0,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- HP Bar -->
                <Grid Grid.Row="0" Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="HP:" Foreground="#FF6666" FontWeight="Bold"/>
                    <ProgressBar Grid.Column="1" Value="{Binding Stats.HPPercent}" Maximum="100"
                                 Height="16" Margin="5,0">
                        <ProgressBar.Foreground>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#FF0000" Offset="0.0"/>
                                <GradientStop Color="#FFAA00" Offset="0.5"/>
                                <GradientStop Color="#00FF00" Offset="1.0"/>
                            </LinearGradientBrush>
                        </ProgressBar.Foreground>
                    </ProgressBar>
                    <TextBlock Grid.Column="2" Text="{Binding Stats.HPText}"
                               FontSize="11" Foreground="#CCCCCC" VerticalAlignment="Center"/>
                </Grid>

                <!-- MP Bar -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="MP:" Foreground="#6666FF" FontWeight="Bold"/>
                    <ProgressBar Grid.Column="1" Value="{Binding Stats.MPPercent}" Maximum="100"
                                 Height="16" Margin="5,0" Foreground="#4488FF"/>
                    <TextBlock Grid.Column="2" Text="{Binding Stats.MPText}"
                               FontSize="11" Foreground="#CCCCCC" VerticalAlignment="Center"/>
                </Grid>
            </Grid>

            <!-- Status Line (Status + Bot Mode + Runtime) -->
            <Grid Grid.Row="3" Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding StatusText}"
                           FontSize="12" FontWeight="Bold" Margin="0,0,10,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="#888888"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Status}" Value="Running">
                                    <Setter Property="Foreground" Value="#00FF00"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Paused">
                                    <Setter Property="Foreground" Value="#FFAA00"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Error">
                                    <Setter Property="Foreground" Value="#FF0000"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>

                <TextBlock Grid.Column="1" Text="{Binding BotModeText}"
                           FontSize="12" Foreground="#AAAAAA"/>

                <TextBlock Grid.Column="2" Text="{Binding RuntimeText}"
                           FontSize="12" Foreground="#888888"/>
            </Grid>

            <!-- Stats (Kills, Deaths, Items, Gold) -->
            <Grid Grid.Row="4" Margin="0,0,0,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="{Binding Stats.StatsText}"
                           FontSize="11" Foreground="#CCCCCC"/>

                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,3,0,0">
                    <TextBlock Text="Gold: " FontSize="11" Foreground="#888888"/>
                    <TextBlock Text="{Binding Stats.GoldText}"
                               FontSize="11" FontWeight="Bold" Foreground="#FFD700"/>
                </StackPanel>
            </Grid>

            <!-- Control Buttons -->
            <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right">
                <!-- Pause Button -->
                <Button Content="⏸" Width="40" Height="30" Margin="0,0,5,0"
                        ToolTip="Pause bot"
                        Command="{Binding PauseCommand}"
                        IsEnabled="{Binding IsRunning}"/>

                <!-- Stop Button -->
                <Button Content="⏹" Width="40" Height="30" Margin="0,0,5,0"
                        ToolTip="Stop bot"
                        Command="{Binding StopCommand}"
                        IsEnabled="{Binding IsActive}"/>

                <!-- Config Button -->
                <Button Content="⚙" Width="40" Height="30" Margin="0,0,5,0"
                        ToolTip="Configure account settings"
                        Command="{Binding ConfigCommand}"/>

                <!-- Details Button -->
                <Button Content="📊" Width="40" Height="30"
                        ToolTip="View detailed statistics"
                        Command="{Binding DetailsCommand}"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
